<!DOCTYPE html>
<html>
<head>
  <title>产品到期监测</title>
  <script>
    // 存储产品存档的数组
    var products = [];

    // 添加产品到存档数组
    function addProduct() {
      var productName = document.getElementById("productName").value;
      var expirationPeriod = document.getElementById("expirationPeriod").value;

      var expirationDate = new Date();
      expirationDate.setDate(expirationDate.getDate() + parseInt(expirationPeriod));

      var product = {
        name: productName,
        expiration: expirationDate
      };

      products.push(product);
      updateArchive();
    }

    // 更新存档列表
    function updateArchive() {
      var archiveList = document.getElementById("archiveList");
      archiveList.innerHTML = "";

      for (var i = 0; i < products.length; i++) {
        var product = products[i];
        var expirationTime = calculateExpirationTime(product.expiration);
        var listItem = document.createElement("li");
        listItem.innerHTML = product.name + " - 到期日期：" + formatExpirationTime(expirationTime);
        archiveList.appendChild(listItem);
      }
    }

    // 计算到期剩余时间（天、小时、分钟、秒）
    function calculateExpirationTime(expirationDate) {
      var today = new Date();
      var timeDiff = expirationDate.getTime() - today.getTime();

      var days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
      var hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

      return {
        days: days,
        hours: hours,
        minutes: minutes,
        seconds: seconds
      };
    }

    // 格式化到期剩余时间
    function formatExpirationTime(expirationTime) {
      var formattedTime = "";

      if (expirationTime.days > 0) {
        formattedTime += expirationTime.days + "天 ";
      }
      if (expirationTime.hours > 0) {
        formattedTime += expirationTime.hours + "小时 ";
      }
      if (expirationTime.minutes > 0) {
        formattedTime += expirationTime.minutes + "分钟 ";
      }
      if (expirationTime.seconds > 0) {
        formattedTime += expirationTime.seconds + "秒";
      }

      return formattedTime;
    }

    // 更新监测数据
    setInterval(updateArchive, 1000);
  </script>
</head>
<body>
  <h1>产品到期监测</h1>
  <form>
    <label for="productName">产品名称：</label>
    <input type="text" id="productName" required><br><br>
    <label for="expirationPeriod">保质期（天）：</label>
    <input type="number" id="expirationPeriod" required><br><br>
    <button type="button" onclick="addProduct()">添加产品</button>
  </form>
  <br>
  <h2>存档</h2>
  <ul id="archiveList"></ul>
</body>
</html>
